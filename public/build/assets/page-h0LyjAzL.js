import{r as i,j as e}from"./app-CK4fKavl.js";import{H as c,S as v,M as y,P as b}from"./header-CCpQ4azn.js";import{c as w,B as a}from"./createLucideIcon-C78b_pTq.js";import{S as C}from"./separator-CW_k5k03.js";import{I as k}from"./input-iu6ULAGD.js";import{c as d}from"./api-BiAU0-Sr.js";import{u as S}from"./cart-provider-k14Zb0I6.js";import{T as F}from"./trash-2-BjCSGiuW.js";/* empty css            */import"./badge-DE2SN-lv.js";import"./avatar-BZC-hOL3.js";import"./index-duAVE-v9.js";import"./index-Ck9pgLKd.js";import"./index-DqDzFycg.js";import"./heart-CWxFlDi0.js";/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]],q=w("ArrowRight",$);function V({cart:u}){const{state:_,removeFromCart:p,updateCartItem:z}=S(),[t,I]=i.useState(u),[j,A]=i.useState(!1),[o,P]=i.useState(null),[l,m]=i.useState(new Set),x=async(s,r)=>{if(!(r<1)){m(n=>new Set(n).add(s));try{await d.updateCartItem(s,{quantity:r}),await fetchCart()}catch(n){console.error("Failed to update quantity:",n),alert("Failed to update quantity")}finally{m(n=>{const h=new Set(n);return h.delete(s),h})}}},f=async s=>{try{await d.removeCartItem(s),await fetchCart(),p(s.toString())}catch(r){console.error("Failed to remove item:",r),alert("Failed to remove item")}},g=async()=>{if(confirm("Are you sure you want to clear your cart?"))try{await d.clearCart(),await fetchCart()}catch(s){console.error("Failed to clear cart:",s),alert("Failed to clear cart")}},N=()=>{window.location.href="/checkout"};return j?e.jsxs("div",{className:"min-h-screen bg-background",children:[e.jsx(c,{}),e.jsx("div",{className:"container mx-auto px-4 py-20",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary mx-auto"}),e.jsx("p",{className:"mt-4 text-muted-foreground",children:"Loading cart..."})]})})]}):o?e.jsxs("div",{className:"min-h-screen bg-background",children:[e.jsx(c,{}),e.jsx("div",{className:"container mx-auto px-4 py-20",children:e.jsxs("div",{className:"text-center",children:[e.jsxs("p",{className:"text-red-500",children:["Error: ",o]}),e.jsx(a,{onClick:fetchCart,className:"mt-4",variant:"outline",children:"Retry"})]})})]}):!t||t.items.length===0?e.jsxs("div",{className:"min-h-screen bg-background",children:[e.jsx(c,{}),e.jsx("div",{className:"container mx-auto px-4 py-20",children:e.jsxs("div",{className:"text-center max-w-md mx-auto",children:[e.jsx(v,{className:"w-16 h-16 text-muted-foreground mx-auto mb-4"}),e.jsx("h2",{className:"text-2xl font-bold text-foreground mb-2",children:"Your cart is empty"}),e.jsx("p",{className:"text-muted-foreground mb-6",children:"Looks like you haven't added any products to your cart yet."}),e.jsx(a,{onClick:()=>window.location.href="/",children:"Start Shopping"})]})})]}):e.jsxs("div",{className:"min-h-screen bg-background",children:[e.jsx(c,{}),e.jsxs("div",{className:"container mx-auto px-4 py-8",children:[e.jsxs("div",{className:"mb-8",children:[e.jsx("h1",{className:"text-3xl font-bold text-foreground",children:"Shopping Cart"}),e.jsxs("p",{className:"text-muted-foreground mt-2",children:[t.items.length," item",t.items.length!==1?"s":""," in your cart"]})]}),e.jsxs("div",{className:"grid lg:grid-cols-3 gap-8",children:[e.jsxs("div",{className:"lg:col-span-2 space-y-4",children:[t.items.map(s=>e.jsx("div",{className:"bg-card border rounded-lg p-6",children:e.jsxs("div",{className:"flex gap-4",children:[e.jsx("div",{className:"w-24 h-24 bg-muted rounded-lg overflow-hidden flex-shrink-0",children:e.jsx("img",{src:s.product.images.find(r=>r.is_primary)?.url||s.product.images[0]?.url||"/placeholder.svg",alt:s.product.name,className:"w-full h-full object-cover"})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex justify-between items-start mb-2",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-foreground truncate",children:s.product.name}),e.jsx("p",{className:"text-sm text-muted-foreground",children:s.product.category.name})]}),e.jsx(a,{variant:"ghost",size:"sm",onClick:()=>f(s.id),className:"text-destructive hover:text-destructive",children:e.jsx(F,{className:"w-4 h-4"})})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("span",{className:"font-semibold text-primary",children:["$",s.price]}),e.jsx("span",{className:"text-sm text-muted-foreground",children:"each"})]}),e.jsxs("div",{className:"flex items-center border rounded-lg",children:[e.jsx(a,{variant:"ghost",size:"sm",onClick:()=>x(s.id,s.quantity-1),disabled:l.has(s.id)||s.quantity<=1,className:"px-2 py-1 h-8 w-8",children:e.jsx(y,{className:"w-3 h-3"})}),e.jsx("span",{className:"px-3 py-1 min-w-[3rem] text-center",children:l.has(s.id)?"...":s.quantity}),e.jsx(a,{variant:"ghost",size:"sm",onClick:()=>x(s.id,s.quantity+1),disabled:l.has(s.id),className:"px-2 py-1 h-8 w-8",children:e.jsx(b,{className:"w-3 h-3"})})]})]}),e.jsx("div",{className:"mt-2 text-right",children:e.jsxs("span",{className:"font-semibold text-foreground",children:["Total: $",s.total]})})]})]})},s.id)),e.jsxs("div",{className:"flex justify-between items-center pt-4",children:[e.jsx(a,{variant:"outline",onClick:g,className:"text-destructive hover:text-destructive",children:"Clear Cart"}),e.jsx(a,{variant:"outline",onClick:()=>window.location.href="/",children:"Continue Shopping"})]})]}),e.jsx("div",{className:"lg:col-span-1",children:e.jsxs("div",{className:"bg-card border rounded-lg p-6 sticky top-4",children:[e.jsx("h2",{className:"text-xl font-semibold text-foreground mb-4",children:"Order Summary"}),e.jsxs("div",{className:"space-y-3 mb-6",children:[e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{className:"text-muted-foreground",children:"Subtotal"}),e.jsxs("span",{children:["$",t.subtotal]})]}),e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{className:"text-muted-foreground",children:"Tax"}),e.jsxs("span",{children:["$",t.tax_amount]})]}),e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{className:"text-muted-foreground",children:"Shipping"}),e.jsx("span",{children:t.shipping_amount===0?"Free":`$${t.shipping_amount}`})]}),t.discount_amount>0&&e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{className:"text-muted-foreground",children:"Discount"}),e.jsxs("span",{className:"text-green-600",children:["-$",t.discount_amount]})]}),e.jsx(C,{}),e.jsxs("div",{className:"flex justify-between text-lg font-semibold",children:[e.jsx("span",{children:"Total"}),e.jsxs("span",{className:"text-primary",children:["$",t.total]})]})]}),e.jsxs(a,{onClick:N,className:"w-full bg-primary hover:bg-primary/90",size:"lg",children:["Proceed to Checkout",e.jsx(q,{className:"w-4 h-4 ml-2"})]}),e.jsx("div",{className:"mt-4",children:e.jsxs("div",{className:"flex gap-2",children:[e.jsx(k,{placeholder:"Promo code",className:"flex-1"}),e.jsx(a,{variant:"outline",size:"sm",children:"Apply"})]})}),e.jsxs("div",{className:"mt-6 pt-4 border-t",children:[e.jsxs("div",{className:"flex items-center gap-2 text-sm text-muted-foreground mb-2",children:[e.jsx("span",{children:"ðŸšš"}),e.jsx("span",{children:"Free shipping on orders over $100"})]}),e.jsxs("div",{className:"flex items-center gap-2 text-sm text-muted-foreground",children:[e.jsx("span",{children:"ðŸ”„"}),e.jsx("span",{children:"30-day returns"})]})]})]})})]})]})]})}export{V as default};

import{r as d,j as e}from"./app-CK4fKavl.js";import{H as v}from"./header-CCpQ4azn.js";import{B as b}from"./createLucideIcon-C78b_pTq.js";import{I as r}from"./input-iu6ULAGD.js";import{S as j}from"./separator-CW_k5k03.js";import{u as N}from"./cart-provider-k14Zb0I6.js";import{o as C}from"./api-BiAU0-Sr.js";/* empty css            */import"./badge-DE2SN-lv.js";import"./avatar-BZC-hOL3.js";import"./index-duAVE-v9.js";import"./index-Ck9pgLKd.js";import"./index-DqDzFycg.js";import"./heart-CWxFlDi0.js";function H(){const{state:l,clearCart:g}=N(),[t,a]=d.useState({first_name:"",last_name:"",email:"",address_line_1:"",city:"",state:"",postal_code:"",country:""}),[m,p]=d.useState(!1),[x,u]=d.useState(null),n=d.useMemo(()=>{const s=l.items.reduce((y,h)=>y+h.price*h.quantity,0),i=Math.round(s*.1*100)/100,c=s>100?0:9.99,o=Math.round((s+i+c)*100)/100;return{subtotal:s,tax:i,shipping:c,total:o}},[l.items]),f=async()=>{p(!0),u(null);try{const s=await C.createGuestOrder({customer:t,items:l.items.map(o=>({id:o.id,quantity:o.quantity,price:o.price}))});g();const i=s?.order?.id,c=i?`/orders/confirmation?order=${i}`:"/orders";window.location.href=c}catch(s){console.error(s),u("Failed to place order. Please try again.")}finally{p(!1)}};return e.jsxs("div",{className:"min-h-screen bg-background",children:[e.jsx(v,{}),e.jsxs("div",{className:"container mx-auto px-4 py-8 grid lg:grid-cols-3 gap-8",children:[e.jsxs("div",{className:"lg:col-span-2 space-y-6",children:[e.jsx("h1",{className:"text-3xl font-bold",children:"Checkout"}),x&&e.jsx("div",{className:"text-red-600 text-sm",children:x}),e.jsxs("div",{className:"bg-card border rounded-lg p-6 space-y-4",children:[e.jsx("h2",{className:"text-xl font-semibold",children:"Contact & Shipping"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:[e.jsx(r,{placeholder:"First name",value:t.first_name,onChange:s=>a({...t,first_name:s.target.value})}),e.jsx(r,{placeholder:"Last name",value:t.last_name,onChange:s=>a({...t,last_name:s.target.value})}),e.jsx(r,{placeholder:"Email",value:t.email,onChange:s=>a({...t,email:s.target.value})}),e.jsx(r,{placeholder:"Address",className:"md:col-span-2",value:t.address_line_1,onChange:s=>a({...t,address_line_1:s.target.value})}),e.jsx(r,{placeholder:"City",value:t.city,onChange:s=>a({...t,city:s.target.value})}),e.jsx(r,{placeholder:"State",value:t.state,onChange:s=>a({...t,state:s.target.value})}),e.jsx(r,{placeholder:"Postal code",value:t.postal_code,onChange:s=>a({...t,postal_code:s.target.value})}),e.jsx(r,{placeholder:"Country",value:t.country,onChange:s=>a({...t,country:s.target.value})})]})]})]}),e.jsx("div",{className:"space-y-4",children:e.jsxs("div",{className:"bg-card border rounded-lg py-5",children:[e.jsx("h2",{className:"text-xl font-semibold mb-4",children:"Order Summary"}),l.items.map(s=>e.jsxs("div",{className:"flex justify-between text-sm mb-2",children:[e.jsxs("span",{children:[s.name," Ã— ",s.quantity]}),e.jsxs("span",{children:["$",(s.price*s.quantity).toFixed(2)]})]},s.id)),e.jsx(j,{className:"my-3"}),e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{children:"Subtotal"}),e.jsxs("span",{children:["$",n.subtotal.toFixed(2)]})]}),e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{children:"Tax"}),e.jsxs("span",{children:["$",n.tax.toFixed(2)]})]}),e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{children:"Shipping"}),e.jsx("span",{children:n.shipping===0?"Free":`$${n.shipping.toFixed(2)}`})]}),e.jsx(j,{className:"my-3"}),e.jsxs("div",{className:"flex justify-between font-semibold",children:[e.jsx("span",{children:"Total"}),e.jsxs("span",{children:["$",n.total.toFixed(2)]})]}),e.jsx(b,{className:"w-full mt-4",disabled:m||l.items.length===0,onClick:f,children:m?"Placing order...":"Place Order"})]})})]})]})}export{H as default};

import{j as e,r as g,a as R}from"./app-CK4fKavl.js";import{H as M}from"./header-CCpQ4azn.js";import{C as $}from"./cart-provider-k14Zb0I6.js";import{c as K,a as O,B as v}from"./createLucideIcon-C78b_pTq.js";import{I as o}from"./input-iu6ULAGD.js";import{L as c}from"./label-D_lsnU-x.js";import{C as m,a as h,b as p,c as u}from"./card-DV_Icjwk.js";import{S as C,a as S,b as w,c as F,d as I}from"./select-CvUxMslo.js";import{B}from"./badge-DE2SN-lv.js";import{T as Q}from"./trash-2-BjCSGiuW.js";/* empty css            */import"./avatar-BZC-hOL3.js";import"./index-duAVE-v9.js";import"./index-Ck9pgLKd.js";import"./index-DqDzFycg.js";import"./heart-CWxFlDi0.js";import"./index-CgWafNPt.js";import"./index-yUCtKGed.js";import"./Combination-ChtfIEPt.js";import"./index-D2A1fZ3i.js";import"./index-DNCT5Y2j.js";/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const G=[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]],J=K("Save",G);function T({className:x,...y}){return e.jsx("textarea",{"data-slot":"textarea",className:O("border-input placeholder:text-muted-foreground focus-visible:border-ring focus-visible:ring-ring/50 aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive dark:bg-input/30 flex field-sizing-content min-h-16 w-full rounded-md border bg-transparent px-3 py-2 text-base shadow-xs transition-[color,box-shadow] outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",x),...y})}function W({categories:x=[],brands:y=[],tags:P=[]}){const[i,n]=g.useState({name:"",description:"",short_description:"",price:"",compare_price:"",sku:"",stock_quantity:"",track_stock:!0,is_featured:!1,category_id:"",brand_id:"",tags:[]}),[f,j]=g.useState([]),[q,_]=g.useState(!1),[D,b]=g.useState(null),[E,k]=g.useState(null),d=r=>{const{name:s,value:a}=r.target;n(t=>({...t,[s]:a}))},A=(r,s)=>{n(a=>({...a,[r]:s}))},U=r=>{const s=r.target.files;if(!s)return;const a=[];Array.from(s).forEach(t=>{const l=new FileReader;l.onloadend=()=>{const N={file:t,is_primary:a.length===0&&f.length===0,preview:l.result};j(z=>[...z,N])},l.readAsDataURL(t)})},V=r=>{j(s=>{const a=s.filter((t,l)=>l!==r);return a.length>0&&!a.some(t=>t.is_primary)&&(a[0].is_primary=!0),a})},H=r=>{j(s=>s.map((a,t)=>({...a,is_primary:t===r})))},L=r=>{r.preventDefault(),_(!0),b(null),k(null);const s=new FormData;Object.keys(i).forEach(a=>{const t=i[a];a==="tags"?t.forEach(N=>{s.append("tags[]",N.toString())}):t!=null&&t!==""&&s.append(a,t.toString())}),f.forEach((a,t)=>{a.file&&(s.append(`images[${t}][file]`,a.file),s.append(`images[${t}][is_primary]`,a.is_primary?"1":"0"))}),R.post("/api/admin/products",s,{preserveState:!0,preserveScroll:!0,onSuccess:()=>{k("Product created successfully!"),_(!1),n({name:"",description:"",short_description:"",price:"",compare_price:"",sku:"",stock_quantity:"",track_stock:!0,is_featured:!1,category_id:"",brand_id:"",tags:[]}),j([])},onError:a=>{b(Object.values(a).flat().join(", ")||"Failed to create product"),_(!1)}})};return e.jsxs("div",{className:"min-h-screen bg-background",children:[e.jsx(M,{}),e.jsx("div",{className:"container mx-auto px-4 py-8",children:e.jsxs("div",{className:"max-w-4xl mx-auto",children:[e.jsxs("div",{className:"mb-8",children:[e.jsx("h1",{className:"text-3xl font-bold text-foreground mb-2",children:"Add New Product"}),e.jsx("p",{className:"text-muted-foreground",children:"Create and manage your products"})]}),D&&e.jsx("div",{className:"mb-6 p-4 bg-red-50 border border-red-200 rounded-lg",children:e.jsx("p",{className:"text-red-600",children:D})}),E&&e.jsx("div",{className:"mb-6 p-4 bg-green-50 border border-green-200 rounded-lg",children:e.jsx("p",{className:"text-green-600",children:E})}),e.jsx("form",{onSubmit:L,children:e.jsxs("div",{className:"space-y-6",children:[e.jsxs(m,{children:[e.jsx(h,{children:e.jsx(p,{children:"Basic Information"})}),e.jsxs(u,{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx(c,{htmlFor:"name",children:"Product Name *"}),e.jsx(o,{id:"name",name:"name",value:i.name,onChange:d,placeholder:"Enter product name",required:!0})]}),e.jsxs("div",{children:[e.jsx(c,{htmlFor:"short_description",children:"Short Description"}),e.jsx(T,{id:"short_description",name:"short_description",value:i.short_description,onChange:d,placeholder:"Brief description for listings",rows:3})]}),e.jsxs("div",{children:[e.jsx(c,{htmlFor:"description",children:"Full Description"}),e.jsx(T,{id:"description",name:"description",value:i.description,onChange:d,placeholder:"Detailed product description",rows:6})]})]})]}),e.jsxs(m,{children:[e.jsx(h,{children:e.jsx(p,{children:"Pricing"})}),e.jsx(u,{className:"space-y-4",children:e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(c,{htmlFor:"price",children:"Price *"}),e.jsx(o,{id:"price",name:"price",type:"number",step:"0.01",value:i.price,onChange:d,placeholder:"0.00",required:!0})]}),e.jsxs("div",{children:[e.jsx(c,{htmlFor:"compare_price",children:"Compare Price"}),e.jsx(o,{id:"compare_price",name:"compare_price",type:"number",step:"0.01",value:i.compare_price,onChange:d,placeholder:"0.00"})]})]})})]}),e.jsxs(m,{children:[e.jsx(h,{children:e.jsx(p,{children:"Inventory"})}),e.jsxs(u,{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx(c,{htmlFor:"sku",children:"SKU"}),e.jsx(o,{id:"sku",name:"sku",value:i.sku,onChange:d,placeholder:"Product SKU"})]}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("input",{type:"checkbox",id:"track_stock",checked:i.track_stock,onChange:r=>A("track_stock",r.target.checked),className:"w-4 h-4"}),e.jsx(c,{htmlFor:"track_stock",children:"Track inventory"})]}),i.track_stock&&e.jsxs("div",{children:[e.jsx(c,{htmlFor:"stock_quantity",children:"Stock Quantity"}),e.jsx(o,{id:"stock_quantity",name:"stock_quantity",type:"number",value:i.stock_quantity,onChange:d,placeholder:"0"})]})]})]}),e.jsxs(m,{children:[e.jsx(h,{children:e.jsx(p,{children:"Product Images"})}),e.jsxs(u,{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx(c,{htmlFor:"images",children:"Upload Images"}),e.jsx("div",{className:"flex items-center gap-4",children:e.jsx(o,{id:"images",type:"file",accept:"image/*",multiple:!0,onChange:U,className:"flex-1"})}),e.jsx("p",{className:"text-sm text-muted-foreground mt-2",children:"Upload one or more product images. The first image will be set as primary."})]}),f.length>0&&e.jsx("div",{className:"grid grid-cols-4 gap-4",children:f.map((r,s)=>e.jsxs("div",{className:"relative group",children:[e.jsx("div",{className:"aspect-square rounded-lg overflow-hidden border-2 border-border",children:e.jsx("img",{src:r.preview,alt:`Product ${s+1}`,className:"w-full h-full object-cover"})}),r.is_primary&&e.jsx(B,{className:"absolute top-2 left-2",children:"Primary"}),e.jsxs("div",{className:"absolute inset-0 bg-black/50 opacity-0 group-hover:opacity-100 transition-opacity flex items-center justify-center gap-2",children:[!r.is_primary&&e.jsx(v,{type:"button",size:"sm",variant:"secondary",onClick:()=>H(s),children:"Set Primary"}),e.jsx(v,{type:"button",size:"sm",variant:"destructive",onClick:()=>V(s),children:e.jsx(Q,{className:"w-4 h-4"})})]})]},s))})]})]}),e.jsxs(m,{children:[e.jsx(h,{children:e.jsx(p,{children:"Category & Brand"})}),e.jsxs(u,{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx(c,{htmlFor:"category_id",children:"Category"}),e.jsxs(C,{value:i.category_id,onValueChange:r=>n(s=>({...s,category_id:r})),children:[e.jsx(S,{id:"category_id",className:"w-full",children:e.jsx(w,{placeholder:"Select a category"})}),e.jsx(F,{children:x.map(r=>e.jsx(I,{value:r.id.toString(),children:r.name},r.id))})]})]}),e.jsxs("div",{children:[e.jsx(c,{htmlFor:"brand_id",children:"Brand"}),e.jsxs(C,{value:i.brand_id,onValueChange:r=>n(s=>({...s,brand_id:r})),children:[e.jsx(S,{id:"brand_id",className:"w-full",children:e.jsx(w,{placeholder:"Select a brand"})}),e.jsx(F,{children:y.map(r=>e.jsx(I,{value:r.id.toString(),children:r.name},r.id))})]})]}),e.jsxs("div",{children:[e.jsx(c,{htmlFor:"tags",children:"Tags"}),e.jsxs(C,{onValueChange:r=>{const s=parseInt(r);i.tags.includes(s)||n(a=>({...a,tags:[...a.tags,s]}))},children:[e.jsx(S,{className:"w-full",children:e.jsx(w,{placeholder:"Add tags"})}),e.jsx(F,{children:P.map(r=>e.jsx(I,{value:r.id.toString(),children:r.name},r.id))})]}),i.tags.length>0&&e.jsx("div",{className:"flex flex-wrap gap-2 mt-2",children:i.tags.map(r=>{const s=P.find(a=>a.id===r);return e.jsxs(B,{variant:"secondary",className:"cursor-pointer",onClick:()=>n(a=>({...a,tags:a.tags.filter(t=>t!==r)})),children:[s?.name," Ã—"]},r)})})]})]})]}),e.jsxs(m,{children:[e.jsx(h,{children:e.jsx(p,{children:"Settings"})}),e.jsx(u,{children:e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("input",{type:"checkbox",id:"is_featured",checked:i.is_featured,onChange:r=>A("is_featured",r.target.checked),className:"w-4 h-4"}),e.jsx(c,{htmlFor:"is_featured",children:"Feature this product"})]})})]}),e.jsxs("div",{className:"flex justify-end gap-4",children:[e.jsx(v,{type:"button",variant:"outline",onClick:()=>{n({name:"",description:"",short_description:"",price:"",compare_price:"",sku:"",stock_quantity:"",track_stock:!0,is_featured:!1,category_id:"",brand_id:"",tags:[]}),j([]),b(null),k(null)},children:"Reset"}),e.jsx(v,{type:"submit",disabled:q,children:q?"Creating...":e.jsxs(e.Fragment,{children:[e.jsx(J,{className:"w-4 h-4 mr-2"}),"Create Product"]})})]})]})})]})})]})}function fe(x){return e.jsx($,{children:e.jsx(W,{...x})})}export{fe as default};
